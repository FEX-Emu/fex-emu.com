<!DOCTYPE html>
<html>
  <head>
    <title>{% if page.title %}{{ page.title }} ‚Äì {% endif %}{{ site.name }} ‚Äì {{ site.description }}</title>

    {% include meta.html %}

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="{{ site.baseurl }}/style.css" />
    <link rel="alternate" type="application/rss+xml" title="{{ site.name }} - {{ site.description }}" href="{{ site.baseurl }}/feed.xml" />

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="{{ site.baseurl }}/" class="site-avatar"><img src="{{ site.avatar }}" /></a>

        <nav>
          <a href="{{ site.baseurl }}/{{ site.blog }}">Blog</a>
          <a href="https://github.com/FEX-Emu/FEX">Github</a>
          {% if site.footer-links.twitter %}
            <a href="https://www.twitter.com/{{ site.footer-links.twitter }}">Twitter</a>
          {% endif %}
          {% if site.footer-links.discord %}
            <a href="https://discord.gg/{{ site.footer-links.discord }}">Discord</a>
          {% endif %}

          <!-- Dark mode toggle -->
          <button onclick="toggleTheme()" class="theme-toggle" aria-label="Toggle dark mode">üåô / ‚òÄÔ∏è</button>
        </nav>

        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      {{ content }}
    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          {% include svg-icons.html %}
        </footer>
      </div>
    </div>

    {% include analytics.html %}
    <script>
    // Apply stored theme or system preference
    (function() {
      const stored = localStorage.getItem("theme");
      const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
      if (stored === "dark" || (!stored && prefersDark)) {
        document.documentElement.setAttribute("data-theme", "dark");
      } else {
        document.documentElement.setAttribute("data-theme", "light");
      }
    })();

    // Toggle function
    function toggleTheme() {
      const current = document.documentElement.getAttribute("data-theme");
      const next = current === "dark" ? "light" : "dark";
      document.documentElement.setAttribute("data-theme", next);
      localStorage.setItem("theme", next);
    }
    </script>  
  </body>
</html>
